<!-- Auth Screen -->
<div class="auth" id="auth-screen">
  <div class="auth-split">
    <div class="auth-media" aria-hidden="true"></div>
    <div class="auth-content">
      <div class="auth-box">
    <div class="auth-logo">
      <div style="width:64px;height:64px;background:linear-gradient(135deg,var(--accent),#059669);border-radius:16px;display:flex;align-items:center;justify-content:center;margin:0 auto">
        <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2.5"><path d="M13 2L3 14h9l-1 8 10-12h-9l1-8z"/></svg>
      </div>
      <h1>OrderFlow AI</h1>
      <p>Restaurant Ordre Automatisering</p>
    </div>
    <div class="auth-card">
      <div class="auth-tabs">
        <button class="auth-tab active" onclick="showAuthTab('login')">Log ind</button>
        <button class="auth-tab" onclick="showAuthTab('signup')">Opret konto</button>
      </div>
      <div id="auth-error" class="auth-error"></div>

      <!-- Login Form -->
      <form id="login-form" onsubmit="handleLogin(event)">
        <div class="form-group">
          <label class="form-label">E-mail</label>
          <input type="email" class="input" id="login-email" placeholder="din@email.dk" required>
        </div>
        <div class="form-group">
          <label class="form-label">Adgangskode</label>
          <input type="password" class="input" id="login-password" placeholder="••••••••" required>
        </div>
        <button type="submit" class="btn btn-primary" style="width:100%">Log ind</button>
      </form>

      <!-- 2FA Challenge Form (hidden by default) -->
      <div id="2fa-challenge-form" style="display:none">
        <div style="text-align:center;margin-bottom:24px">
          <div style="width:56px;height:56px;background:var(--accent-dim);border-radius:14px;display:flex;align-items:center;justify-content:center;margin:0 auto 16px">
            <svg width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="var(--accent)" stroke-width="2"><rect x="3" y="11" width="18" height="11" rx="2" ry="2"/><path d="M7 11V7a5 5 0 0 1 10 0v4"/></svg>
          </div>
          <h3 style="font-size:18px;font-weight:600;margin-bottom:4px">Bekræft din identitet</h3>
          <p style="font-size:13px;color:var(--muted)">Indtast din engangskode for at fortsætte</p>
        </div>

        <!-- 2FA Method Tabs -->
        <div id="2fa-method-tabs" style="display:flex;gap:8px;margin-bottom:20px">
          <button type="button" class="btn btn-secondary 2fa-method-tab active" data-method="totp" onclick="switch2FAMethod('totp')" style="flex:1;font-size:13px">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="margin-right:6px"><rect x="5" y="2" width="14" height="20" rx="2" ry="2"/><line x1="12" y1="18" x2="12.01" y2="18"/></svg>
            App
          </button>
          <button type="button" class="btn btn-secondary 2fa-method-tab" data-method="email" onclick="switch2FAMethod('email')" style="flex:1;font-size:13px">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="margin-right:6px"><path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"/><polyline points="22,6 12,13 2,6"/></svg>
            E-mail
          </button>
        </div>

        <!-- TOTP Input -->
        <div id="2fa-totp-input">
          <div class="form-group">
            <label class="form-label">Kode fra authenticator app</label>
            <input type="text" class="input" id="2fa-code-input" placeholder="000000" maxlength="6" style="text-align:center;font-size:28px;letter-spacing:8px;font-family:monospace" autocomplete="one-time-code" inputmode="numeric">
          </div>
        </div>

        <!-- Email OTP Input -->
        <div id="2fa-email-input" style="display:none">
          <div style="background:var(--bg3);border-radius:8px;padding:12px;margin-bottom:16px;text-align:center">
            <p style="font-size:13px;color:var(--text2);margin-bottom:8px">Kode sendt til <strong id="2fa-email-display"></strong></p>
            <button type="button" class="btn btn-secondary" onclick="resend2FAEmail()" style="font-size:12px;padding:6px 12px" id="2fa-resend-btn">Send ny kode</button>
          </div>
          <div class="form-group">
            <label class="form-label">Kode fra email</label>
            <input type="text" class="input" id="2fa-email-code-input" placeholder="000000" maxlength="6" style="text-align:center;font-size:28px;letter-spacing:8px;font-family:monospace" autocomplete="one-time-code" inputmode="numeric">
          </div>
        </div>

        <!-- Backup Code Option -->
        <div style="text-align:center;margin-top:16px">
          <button type="button" style="background:none;border:none;color:var(--muted);font-size:12px;cursor:pointer;text-decoration:underline" onclick="toggle2FABackupInput()">Brug backup kode</button>
        </div>

        <!-- Backup Code Input (hidden) -->
        <div id="2fa-backup-input" style="display:none;margin-top:16px">
          <div class="form-group">
            <label class="form-label">Backup kode</label>
            <input type="text" class="input" id="2fa-backup-code-input" placeholder="XXXX-XXXX" maxlength="9" style="text-align:center;font-size:18px;letter-spacing:4px;font-family:monospace;text-transform:uppercase">
          </div>
        </div>

        <div style="display:flex;gap:12px;margin-top:20px">
          <button type="button" class="btn btn-secondary" onclick="cancel2FAChallenge()" style="flex:1">Tilbage</button>
          <button type="button" class="btn btn-primary" onclick="verify2FAChallenge()" style="flex:1" id="2fa-verify-btn">Bekræft</button>
        </div>
      </div>

      <!-- 2FA Setup Required Form (for employees without 2FA) -->
      <div id="2fa-setup-required" style="display:none">
        <div style="text-align:center;margin-bottom:24px">
          <div style="width:56px;height:56px;background:rgba(251,191,36,0.15);border-radius:14px;display:flex;align-items:center;justify-content:center;margin:0 auto 16px">
            <svg width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="#fbbf24" stroke-width="2"><path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"/><line x1="12" y1="9" x2="12" y2="13"/><line x1="12" y1="17" x2="12.01" y2="17"/></svg>
          </div>
          <h3 style="font-size:18px;font-weight:600;margin-bottom:4px">2FA påkrævet</h3>
          <p style="font-size:13px;color:var(--muted)">Som medarbejder skal du aktivere to-faktor autentificering</p>
        </div>

        <div style="background:var(--bg3);border-radius:12px;padding:16px;margin-bottom:16px">
          <div style="font-weight:600;margin-bottom:8px">Vælg en metode:</div>
          <div style="display:flex;flex-direction:column;gap:12px">
            <button type="button" class="btn btn-secondary" onclick="setup2FAFromLogin('totp')" style="justify-content:flex-start;text-align:left;padding:16px">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="var(--accent)" stroke-width="2" style="margin-right:12px;flex-shrink:0"><rect x="5" y="2" width="14" height="20" rx="2" ry="2"/><line x1="12" y1="18" x2="12.01" y2="18"/></svg>
              <div>
                <div style="font-weight:600">Authenticator App</div>
                <div style="font-size:12px;color:var(--muted)">Mest sikker - brug Google/Microsoft Authenticator</div>
              </div>
            </button>
            <button type="button" class="btn btn-secondary" onclick="setup2FAFromLogin('email')" style="justify-content:flex-start;text-align:left;padding:16px">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="var(--accent)" stroke-width="2" style="margin-right:12px;flex-shrink:0"><path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"/><polyline points="22,6 12,13 2,6"/></svg>
              <div>
                <div style="font-weight:600">Email Kode</div>
                <div style="font-size:12px;color:var(--muted)">Modtag kode på din email ved login</div>
              </div>
            </button>
          </div>
        </div>

        <button type="button" class="btn btn-secondary w-full" onclick="cancel2FASetupFromLogin()">Log ud</button>
      </div>

      <form id="signup-form" style="display:none" onsubmit="handleSignup(event)">
        <div class="form-group">
          <label class="form-label">Fulde navn</label>
          <input type="text" class="input" id="signup-name" placeholder="Dit navn" required>
        </div>
        <div class="form-group">
          <label class="form-label">E-mail</label>
          <input type="email" class="input" id="signup-email" placeholder="din@email.dk" required>
        </div>
        <div class="form-group">
          <label class="form-label">Adgangskode</label>
          <input type="password" class="input" id="signup-password" placeholder="Min. 6 tegn" required minlength="6">
        </div>
        <button type="submit" class="btn btn-primary" style="width:100%">Opret konto</button>
      </form>

      <div id="auth-demo-buttons" style="text-align:center;margin-top:20px;padding-top:20px;border-top:1px solid var(--border)">
        <button class="btn btn-secondary" style="width:100%" onclick="loginDemo()">Prøv Demo</button>
        <button type="button" class="btn-demo" onclick="loginAdmin()" style="margin-top: 8px; width:100%; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; border: none; padding: 12px; border-radius: 8px; font-weight: 500; cursor: pointer; display: flex; align-items: center; justify-content: center; gap: 8px;">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M12 2a10 10 0 1 0 10 10A10 10 0 0 0 12 2z"/>
            <path d="M12 6v6l4 2"/>
          </svg>
          Admin Log ind
        </button>
      </div>
    </div>
      </div>
    </div>
  </div>
</div>
